(()=>{if("www.amazon.co.jp"!==location.host)return void alert("表示しているページは Amazon.co.jp の画面ではなさそうです。");if(/^\/dp\/([\dA-Z]{10})$/.test(location.pathname))return void console.info("すでに正規化済みです。");const o=document.querySelector('link[rel="canonical"]')?.href;void 0!==o?location.assign(/^https:\/\/www.amazon.co.jp\/dp\/([\dA-Z]{10})$/.test(o)?o:o.replace(/\/([^/]*)\/dp\//,"/dp/")):alert('<link rel="canonical"> がありません。')})();